{% extends "site_admin/base.html" %}

{% block title %}Micropub error details{% endblock %}

{% block content %}
  <div class="flex flex-col gap-6">
    <section class="flex flex-wrap items-start justify-between gap-4">
      <div>
        <div class="text-sm uppercase tracking-[0.2em] text-[color:var(--admin-muted)]">Micropub errors</div>
        <h1 class="text-2xl font-semibold">Micropub error details</h1>
        <p class="mt-1 text-sm text-[color:var(--admin-muted)]">{{ log.method }} {{ log.path }}</p>
      </div>
      <div class="flex flex-wrap items-center gap-3">
        <a
          href="{% url 'site_admin:micropub_error_list' %}"
          class="rounded-full border border-[color:var(--admin-border)] px-4 py-2 text-sm font-semibold text-[color:var(--admin-ink)] transition hover:bg-[color:var(--admin-bg)]"
        >
          Back to Micropub errors
        </a>
      </div>
    </section>

    <section class="rounded-3xl border border-[color:var(--admin-border)] bg-[color:var(--admin-surface)] p-6 shadow-sm">
      <div class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
        <div class="space-y-4">
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Error</div>
            <div class="mt-2 text-sm text-rose-700">
              {{ log.error|default:"(no error details)" }}
            </div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Request headers</div>
            <pre class="mt-3 max-h-80 overflow-auto rounded-xl bg-[color:var(--admin-bg)] p-3 text-xs text-[color:var(--admin-ink)]">{{ headers_text }}</pre>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Request query</div>
            <pre class="mt-3 max-h-60 overflow-auto rounded-xl bg-[color:var(--admin-bg)] p-3 text-xs text-[color:var(--admin-ink)]">{{ query_text }}</pre>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Request body</div>
            <pre class="mt-3 max-h-96 overflow-auto rounded-xl bg-[color:var(--admin-bg)] p-3 text-xs text-[color:var(--admin-ink)]">{{ log.request_body|default:"" }}</pre>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Response body</div>
            <pre class="mt-3 max-h-60 overflow-auto rounded-xl bg-[color:var(--admin-bg)] p-3 text-xs text-[color:var(--admin-ink)]">{{ log.response_body|default:"" }}</pre>
          </div>
        </div>
        <div class="space-y-4">
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Status</div>
            <div class="mt-2">
              <span class="rounded-full bg-rose-50 px-3 py-1 text-xs font-semibold text-rose-700">
                {{ log.status_code }}
              </span>
            </div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Method</div>
            <div class="mt-2 font-semibold">{{ log.method }}</div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Content type</div>
            <div class="mt-2">{{ log.content_type|default:"(none)" }}</div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Remote address</div>
            <div class="mt-2">{{ log.remote_addr|default:"(unknown)" }}</div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">User agent</div>
            <div class="mt-2 break-words">{{ log.user_agent|default:"(none)" }}</div>
          </div>
          <div class="rounded-2xl border border-[color:var(--admin-border)] bg-white p-4 text-sm">
            <div class="text-xs font-semibold uppercase tracking-wide text-[color:var(--admin-muted)]">Received</div>
            <div class="mt-2">{{ log.created_at|date:"M j, Y, P" }}</div>
          </div>
        </div>
      </div>
    </section>
  </div>
{% endblock %}
