{% load static author %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ settings.title }}{% block title %}{% endblock %}</title>

    {# Theme assets live at themes/<slug>/... #}
    <link rel="stylesheet" href="{% theme_static 'css/theme.css' %}" />
    <link rel="stylesheet" href="{% theme_static 'css/print.css' %}" media="print" />

    {# RSS feed (only present on pages where feed_url is provided) #}
    {% if feed_url %}
    <link rel="alternate" type="application/rss+xml" href="{{ feed_url }}" title="{{ settings.title }} RSS" />
    {% endif %}

    {# IndieWeb endpoints for auth, Micropub, and Webmention #}
    <link rel="authorization_endpoint" href="https://indieauth.com/auth">
    <link rel="token_endpoint" href="https://tokens.indieauth.com/token">
    <link rel="microsub" href="https://aperture.p3k.io/microsub/205">
    <link rel="micropub" href="{% url 'micropub-endpoint' %}">
    <link rel="webmention" href="{% url 'webmention-endpoint' %}">

    {# Analytics beacon uses the visit-id meta tag #}
    <meta name="visit-id" content="{{ request.visit_id }}">
    <script src="{% static 'analytics/beacon.js' %}"></script>

    {% block head %}{% endblock %}
  </head>
  <body class="theme-webstead" data-site-admin-bar-url="{% url 'site_admin:admin_bar' %}">
    <a class="skip-link" href="#content">Skip to content</a>

    <header class="site-header">
      <div class="site-title">
        <a href="/" rel="home">{{ settings.title }}</a>
      </div>

      {% if not hide_site_description %}
      <p class="site-tagline">{{ settings.tagline }}</p>
      {% endif %}

      {% if not hide_nav %}
      <nav class="site-nav" aria-label="Main navigation">
        {% for item in menu_items %}
        <a href="{{ item.url }}">{{ item.text }}</a>
        {% endfor %}
      </nav>
      {% endif %}
    </header>

    <main id="content" class="site-main">
      {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
      <div class="footer-meta">
        <span>Â© {{ now|date:"Y" }}</span>
        <a href="{% static 'pubkey.txt' %}" rel="me pgpkey">{% author_hcard_name %}</a>
      </div>

      {% if footer_menu_items %}
      <nav class="footer-nav" aria-label="Footer navigation">
        {% for item in footer_menu_items %}
        <a href="{{ item.url }}">{{ item.text }}</a>
        {% endfor %}
      </nav>
      {% endif %}

      {% block footer_extra %}
      {% endblock %}
    </footer>

    <script src="{% theme_static 'js/theme.js' %}"></script>
    <script src="{% static 'js/site_admin_bar.js' %}"></script>
  </body>
</html>
