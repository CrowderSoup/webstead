{% extends "base.html" %}
{% block content %}
<form class="post-type-filter" action="{% url 'posts' %}" method="get" style="display:inline-flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
  <span>Filter posts by...</span>
  {% for kind_value, kind_label in post_kinds %}
    <label style="display:flex; align-items:center; gap:0.25rem;">
      <input type="checkbox" name="kind" value="{{ kind_value }}" {% if kind_value in selected_kinds %}checked{% endif %} onchange="this.form.submit()">
      {{ kind_label }}
    </label>
  {% endfor %}
</form>

<div class="h-feed">
  {% for post in posts %}
    <!-- Post Kind Detection -->
    {% if post.kind == 'note' %}
      <!-- Show Note Template -->
      {% include 'blog/note.html' %} 
    {% elif post.kind == 'photo' %}
      <!-- Show Photo Template -->
      {% include 'blog/photo.html' %} 
    {% else %}
      <!-- Show Article Template -->
      {% include 'blog/article-summary.html' %} 
    {% endif %}
{% endfor %}
</div>


<nav class="paginator">
    {% if posts.has_previous %}
        <span class="pagination-item">
            <a href="?{{ selected_kinds_query }}{% if selected_kinds_query %}&{% endif %}page={{ posts.previous_page_number }}">&larr; Newer</a>
        </span>
    {% endif %}
    <span class="pagination-item-spacer">
        Page {{ posts.number }} of {{ posts.paginator.num_pages }}
    </span>
    {% if posts.has_next %}
        <span class="pagination-item">
            <a href="?{{ selected_kinds_query }}{% if selected_kinds_query %}&{% endif %}page={{ posts.next_page_number }}">Older &rarr;</a>
        </span>
    {% endif %}
</nav>
{% endblock %}

{% block footer_extra %}
  <span aria-hidden="true">Â·</span>
  <a href="{% url 'posts_feed' %}{% if feed_kinds_query %}?{{ feed_kinds_query }}{% endif %}">RSS feed</a>
  {{ block.super }}
{% endblock %}
