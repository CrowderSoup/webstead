{% load author %}

{% with activity=post.activity %}
<article class="h-entry entry-activity">
  <header class="entry-header">
    {% if activity.name %}
    <p class="activity-kicker p-category">{{ activity.name }}</p>
    {% endif %} {% if post.title %}
    <a class="u-url" href="/blog/post/{{ post.slug }}">
      <h3 class="p-name">{{ post.title }}</h3>
    </a>
    {% endif %}
  </header>

  {% if activity.track_url %}
  <div
    class="activity-map"
    data-gpx-url="{{ activity.track_url }}"
    aria-label="Activity map"
  ></div>
  <section class="activity-elevation" data-activity-elevation>
    <header class="activity-elevation__header">
      <p>Elevation profile</p>
      <p class="activity-elevation__totals">
        Gain <strong data-stat="elevation-gain">--</strong> Loss
        <strong data-stat="elevation-loss">--</strong>
      </p>
    </header>
    <svg
      class="activity-elevation__chart"
      role="img"
      aria-label="Elevation over time"
    ></svg>
    <p class="activity-elevation__empty" hidden>Elevation data unavailable.</p>
  </section>
  <dl class="activity-stats" data-activity-stats>
    <div>
      <dt>Distance</dt>
      <dd data-stat="distance">--</dd>
    </div>
    <div>
      <dt>Moving time</dt>
      <dd data-stat="moving-time">--</dd>
    </div>
    <div>
      <dt>Stopped time</dt>
      <dd data-stat="stopped-time">--</dd>
    </div>
    <div>
      <dt>Total time</dt>
      <dd data-stat="total-time">--</dd>
    </div>
    <div>
      <dt>Avg moving speed</dt>
      <dd data-stat="avg-moving-speed">--</dd>
    </div>
    <div>
      <dt>Max speed</dt>
      <dd data-stat="max-speed">--</dd>
    </div>
    <div>
      <dt>Elevation gain</dt>
      <dd data-stat="elevation-gain">--</dd>
    </div>
    <div>
      <dt>Elevation loss</dt>
      <dd data-stat="elevation-loss">--</dd>
    </div>
  </dl>
  {% else %}
  <p class="activity-track activity-track--missing">GPX track coming soon.</p>
  {% endif %}

  <div class="p-content">{{ post.html }}</div>
  {% include 'blog/tags.html' %}
  <div class="entry-meta">
    <a class="u-url" href="/blog/post/{{ post.slug }}">
      <time class="dt-published" datetime="{{ page.published_on }}">
        {{ post.published_on|date:"Y-m-d" }}
      </time>
    </a>
    <span class="p-author h-card">{% author_hcard_name post.author %}</span>
  </div>
</article>
{% endwith %}
